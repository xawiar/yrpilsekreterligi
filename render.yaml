services:
  - type: static
    name: ilce-sekreterlik
    branch: main
    rootDir: "sekreterlik-app/client"
    buildCommand: rm -rf dist node_modules/.vite .cache && npm install && npm run build && node scripts/fix-spa-routing.js
    staticPublishPath: "dist"
    routes:
      - type: rewrite
        source: /election-results/*
        destination: /index.html
      - type: rewrite
        source: /*
        destination: /index.html
    envVars:
      - key: VITE_USE_FIREBASE
        value: true
      - key: VITE_ENCRYPTION_KEY
        value: ilsekreterlik-app-encryption-key-2024-secret-very-long-key-for-security-minimum-32-characters

